<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        body{
            font-size: 18px;
            padding: 20px 10px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        #table{
            width: 100%;
        }
        table th {
            background-color: rgb(182, 127, 255);
            padding: 8px 10px;
            font-size: 25px;
        }

        table tr {
            background-color: rgb(205, 205, 245);
            transition: 0.2s;
        }

        table tr:hover {
            background-color: rgb(195, 170, 247);
            cursor: pointer;
        }
        button{
            padding: 8px;
            border: none ;
            font-size: 20px;
            background-color: rgb(166, 113, 166);
            border-radius: 18px;
            color: white;
            margin-top: 20px;
        }
        button:hover{
            background-color:rgb(166, 94, 166); 
        }
        input{
            padding: 8px;
            margin-left: 600px;
        }
    </style>
</head>
<body>
    <table border="2" id="table">

            <tr>
                <th>Title</th>
                <th>Authors</th>
                <th>Page Count</th>
                <th>Price</th>
                <th>Currency</th>
                <th>Discount</th>
                <th>Discount Units</th>
            </tr>

    </table>
    <button id="prevbtn">prev</button>
    <button id="nextbtn">next</button>
    <button id="sortbtn">sort</button>

    <input type="text" id="search" placeholder="Search by title...">
    <button id="searchbtn">search</button>

    <script type="module">

        import books from "./data.js";

        let start = 1;
        let end = 11;

        let page = books.slice(start, end);

        let table = document.getElementById("table");

        function display(){

            let result = "";

            page.forEach(book => {

                result += `
                <tr>
                    <td>${book.title}</td>
                    <td>${book.authors}</td>
                    <td>${book.pageCount}</td>
                    <td>${book.price}</td>
                    <td>${book.currency}</td>
                    <td>${book.discount}</td>
                    <td>${book.discountUnits}</td>
                </tr>
                `;

            });

            table.innerHTML = table.rows[0].outerHTML + result;

        }

        display();

        let button = document.querySelector("button");

        sortbtn.addEventListener("click", function(){

            page.sort((a,b)=> a.title.localeCompare(b.title));

            display();

        });

        let prevbtn = document.getElementById("prevbtn");
        prevbtn.addEventListener("click", function(){

            start -= 10;
            end -= 10;

            page = books.slice(start, end);

            display();

        });

        let nextbtn = document.getElementById("nextbtn");
        nextbtn.addEventListener("click", function(){

            start += 10;
            end += 10;

            page = books.slice(start, end);

            display();

        });

        let searchbtn = document.getElementById("searchbtn");
        searchbtn.addEventListener("click", function(){

            let search = document.getElementById("search").value;

            let result = books.filter(book => book.title.toLowerCase().includes(search.toLowerCase()));

            let res = "";

            result.forEach(book => {

                res += `
                <tr>
                    <td>${book.title}</td>
                    <td>${book.authors}</td>
                    <td>${book.pageCount}</td>
                    <td>${book.price}</td>
                    <td>${book.currency}</td>
                    <td>${book.discount}</td>
                    <td>${book.discountUnits}</td>
                </tr>
                `;

            });

            table.innerHTML = table.rows[0].outerHTML + res;

        });

    </script>

</body>
</html>

